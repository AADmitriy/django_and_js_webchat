{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="{% static 'css/styles.css' %}">
    <!-- <script src="static/js/process_chat.js"></script> -->
    <title>Telegram clone</title>
</head>
<body>
    <div class="popups">
        <div class="attach_img_preview hidden">
            <div class="popup_backdrop"></div>
            <div class="popup_container">
                <div class="popup_topnav">
                    <button class="close_popup">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                            <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708"/>
                        </svg>
                    </button>
                    <h3>Send Photo</h3>
                </div>
                <!-- <img src="{% get_media_prefix %}DA_icon.png"> -->
                <img src="{% get_media_prefix %}files\iceland-s-weather-climate-and-temperature-year-round-14.jpg">
                <!-- <img src="{% get_media_prefix %}files\icons8-bug-48.png"> -->
                <div class="input_sumbit_container">
                    <input type="text" id="img_caption" placeholder="Add a caption...">
                    <button class="submit_attached_file">Send</button>
                </div>
            </div>
        </div>
        <div class="attach_file_preview hidden">
            <div class="popup_backdrop"></div>
            <div class="popup_container">
                <div class="popup_topnav">
                    <button class="close_popup">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                            <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708"/>
                        </svg>
                    </button>
                    <h3>Send File</h3>
                </div>
                <div class="file_preview">
                    <div class="file_icon">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                            <path d="M14 4.5V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h5.5zm-3 0A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4.5z"/>
                        </svg>
                    </div>
                    <div class="file_info">
                        <div class="file_name">some_file.pdf</div>
                        <div class="file_size">123.5 KB</div>
                    </div>
                </div>
                <div class="input_sumbit_container">
                    <input type="text" id="file_caption" placeholder="Add a caption...">
                    <button class="submit_attached_file">Send</button>
                </div>
            </div>
        </div>
    </div>
    {% include "partials_for_base_page/delete_msg_popup.html" %}
    <div class="chat_menu_wrapper hidden" room_uuid="0">
        <div class="chat_menu_backdrop"></div>
        <div class="chat_menu_options">
            <div class="chat_option">
                <button class="leave">Leave</button>
            </div>
        </div>
    </div>
    <div class="main_content">
        <div class="left_sidebar">
            <!-- SIDEBAR WITH CHATS LIST, SEARCH BAR AND MENU BUTTON -->
            <!-- <div class="chats" style="display:none"> -->
            <div class="chats hidden">
                <div class="top_bar">
                    <button class="settings_button">
                        <!-- <span class="material-symbols-outlined">menu</span> -->
                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#5f6368"><path d="M120-240v-80h720v80H120Zm0-200v-80h720v80H120Zm0-200v-80h720v80H120Z"/></svg>
                    </button>
                    <div class="search_input_container">
                        <!-- <span class="material-symbols-outlined">search</span> -->
                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#5f6368"><path d="M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z"/></svg>
                        <input placeholder="Search" name="search">
                    </div>
                </div>
                <div class="chats_list">
                    {% include "partials_for_base_page/chat_preview_with_img.html" %}
                    {% include "partials_for_base_page/chat_preview_no_img.html" %}
                    {% include "partials_for_base_page/chat_preview_group.html" %}
                </div>
                <!-- BUTTON TO ADD NEW CHANNELS AND GROUPS -->
                {% include "partials_for_base_page/add_group_channel_button.html" %}
            </div>
            <!-- LEFT SIDEBAR, GROUP CREATION MENU -->
            <!-- {% include "partials_for_base_page/group_creation_menu.html" 
                %} -->
        </div>
        <!-- RIGHT SIDEBAR MESSAGES, INPUT, CHAT INFOS -->
        <div class="talk">
            <div class="talk_top_nav">
                <div class="collocutor_data">
                    <div class="collocutor_profile_img">
                        <!-- <img src="{% get_media_prefix %}DA_icon.png"> -->
                        <div class="image_thumb">C</div>
                    </div>
                    <div class="collocutor_info">
                        <div class="collocutor_name">Cool bro</div>
                        <span class="collocutor_meta">
                            <!-- <span class="last_seen">last seen <span class="when_last_seen">recently</span></span>
                            <span class="collocutor_online">online</span> -->
                            <span class="group_data">
                                <span class="members_count">176 members</span><span class="online_count">, 3 online</span>
                            </span>
                        </span>
                    </div>
                </div>
                <div class="talk_options">
                    <button class="talk_search">
                        <span class="material-symbols-outlined">search</span>
                    </button>
                    <button class="make_call">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                            <path d="M3.654 1.328a.678.678 0 0 0-1.015-.063L1.605 2.3c-.483.484-.661 1.169-.45 1.77a17.6 17.6 0 0 0 4.168 6.608 17.6 17.6 0 0 0 6.608 4.168c.601.211 1.286.033 1.77-.45l1.034-1.034a.678.678 0 0 0-.063-1.015l-2.307-1.794a.68.68 0 0 0-.58-.122l-2.19.547a1.75 1.75 0 0 1-1.657-.459L5.482 8.062a1.75 1.75 0 0 1-.46-1.657l.548-2.19a.68.68 0 0 0-.122-.58zM1.884.511a1.745 1.745 0 0 1 2.612.163L6.29 2.98c.329.423.445.974.315 1.494l-.547 2.19a.68.68 0 0 0 .178.643l2.457 2.457a.68.68 0 0 0 .644.178l2.189-.547a1.75 1.75 0 0 1 1.494.315l2.306 1.794c.829.645.905 1.87.163 2.611l-1.034 1.034c-.74.74-1.846 1.065-2.877.702a18.6 18.6 0 0 1-7.01-4.42 18.6 18.6 0 0 1-4.42-7.009c-.362-1.03-.037-2.137.703-2.877z"/>
                        </svg>
                    </button>
                    <button class="more_talk_info">
                        <span class="material-symbols-outlined">more_vert</span>
                    </button>
                </div>
            </div>
            <div class="conversation_background">
                <div class="conversation_container">
                    <!-- <div class="messages"> -->
                    {% include "partials_for_base_page/messages_flow.html" %}
                    <!-- </div> -->
                    <form method="POST" action="" class="message_input_options">
                    <!-- <div class="message_input_options"> -->
                        <div class="main_input_info">
                            <!-- {% include "partials_for_base_page/input_edit_info.html" 
                            %} -->
                            <div class="main_input">
                                <!-- {% csrf_token %} -->
                                <div class="emojis">
                                    <!-- <span class="material-symbols-outlined">sentiment_satisfied</span> -->
                                    <svg xmlns="http://www.w3.org/2000/svg" height="24px" width="24px" fill="#5f6368" viewBox="0 -960 960 960">
                                        <path d="M620-520q25 0 42.5-17.5T680-580q0-25-17.5-42.5T620-640q-25 0-42.5 17.5T560-580q0 25 17.5 42.5T620-520Zm-280 0q25 0 42.5-17.5T400-580q0-25-17.5-42.5T340-640q-25 0-42.5 17.5T280-580q0 25 17.5 42.5T340-520Zm140 260q68 0 123.5-38.5T684-400h-66q-22 37-58.5 58.5T480-320q-43 0-79.5-21.5T342-400h-66q25 63 80.5 101.5T480-260Zm0 180q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-400Zm0 320q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Z"/>
                                    </svg>
                                </div>
                                {% for field in msg_form %}
                                {{ field }}
                                {% endfor %}
                                <!-- <input class="message_input" placeholder="Write a message.."> -->
                                <div class="add_file">
                                    <!-- <span class="material-symbols-outlined">attach_file</span> -->
                                    <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#5f6368"><path d="M720-330q0 104-73 177T470-80q-104 0-177-73t-73-177v-370q0-75 52.5-127.5T400-880q75 0 127.5 52.5T580-700v350q0 46-32 78t-78 32q-46 0-78-32t-32-78v-370h80v370q0 13 8.5 21.5T470-320q13 0 21.5-8.5T500-350v-350q-1-42-29.5-71T400-800q-42 0-71 29t-29 71v370q-1 71 49 120.5T470-160q70 0 119-49.5T640-330v-390h80v390Z"/></svg>
                                    <div class="attach_file_menu">
                                        <button class="img_input_btn">Photo</button>
                                        <button class="file_input_btn">File</button>
                                    </div>
                                </div>
                                <input type="file" accept="image/png, image/jpeg" id="attached_img" style="display:none;">
                                <input type="file" id="attached_file" style="display:none;">
                            </div>
                        </div>
                        <div class="send_msg_record_voice">
                            <button onclick="recordVoice()" class="record_voice">
                                <!-- <span class="material-symbols-outlined">mic</span> -->
                                <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#5f6368"><path d="M480-400q-50 0-85-35t-35-85v-240q0-50 35-85t85-35q50 0 85 35t35 85v240q0 50-35 85t-85 35Zm0-240Zm-40 520v-123q-104-14-172-93t-68-184h80q0 83 58.5 141.5T480-320q83 0 141.5-58.5T680-520h80q0 105-68 184t-172 93v123h-80Zm40-360q17 0 28.5-11.5T520-520v-240q0-17-11.5-28.5T480-800q-17 0-28.5 11.5T440-760v240q0 17 11.5 28.5T480-480Z"/></svg>
                            </button>
                            <button type="submit" class="submit_msg">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                                    <path d="M15.964.686a.5.5 0 0 0-.65-.65L.767 5.855H.766l-.452.18a.5.5 0 0 0-.082.887l.41.26.001.002 4.995 3.178 3.178 4.995.002.002.26.41a.5.5 0 0 0 .886-.083zm-1.833 1.89L6.637 10.07l-.215-.338a.5.5 0 0 0-.154-.154l-.338-.215 7.494-7.494 1.178-.471z"/>
                                </svg>
                            </button>
                        </div>
                    <!-- </div> -->
                    </form>
                </div>
                </div>
                <!-- RIGHT HIDDEN SIDEBAR WITH CONVERSATION INFO -->
                <div class="conversation_info hidden_conversation_info">
                <!-- <div class="conversation_info "> -->
                    <!-- <div class="initial_info_wrapper" style="display:none"> -->
                    <div class="initial_info_wrapper">
                        <!-- {% include "partials_for_base_page/conversation_info_group.html" 
                            %} -->
                        {% include "partials_for_base_page/conversation_info_user.html" %}
                    </div>
                    <!-- <div class="user_to_add_selection_wrapper"> -->
                    <!-- <div class="user_to_add_selection_wrapper" style="display:none"> -->
                       <!-- {% include "partials_for_base_page/add_user_to_group_selection.html" 
                       %} -->
                    <!-- </div> -->
                </div>
            </div>
        </div>
    </div>
</body>
<script>
    // const msg_data = {{ data|safe }}
    {{ message_types|safe }}
    var csrf_token = '{{ csrf_token }}';
</script>
<script type="module" src="{% static 'js/manage_chat2.js' %}"></script>
</html>